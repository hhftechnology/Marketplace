[variables]
main_domain = "${domain}"
nginx_port = "80"

[config]
[[config.domains]]
serviceName = "nginx"
port = 80
host = "${main_domain}"
path = "/"

[config.env]
NGINX_HOST = "${main_domain}"
NGINX_PORT = "${nginx_port}"

[[config.mounts]]
filePath = "/etc/nginx/nginx.conf"
content = """
# Custom nginx config
user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    server {
        listen 80;
        server_name ${main_domain};
        
        location / {
            root /usr/share/nginx/html;
            index index.html;
        }
    }
}
"""

